<p-confirmPopup></p-confirmPopup>
<div id="pageWraper">
    <app-nav-bar></app-nav-bar>
    <div id="contentPages">
        <app-project-sidebar [projectName]="projectName"></app-project-sidebar>

        <div class="content">
            <div id="left-side" class="container col-6">
                <span class="project-settings-title">Project Settings</span>

                <span class="titleUpload">Project icon:</span>
                <div class="container upload">
                    <div class="icon-image">
                        <img 
                        [src]="projectImageSource !== '' ? projectImageSource : defaultImagePath"
                        alt="project-default-image">
                    </div>
                    <div class="upoloadBtn">
                        <button pButton pRipple label="Upload icon" class="buttonUpload" (click)="showDialog()"></button>
                        <p-dialog header="Header" [(visible)]="visible" [modal]="true" [style]="{ width: '50rem' }" [breakpoints]="{ '1199px': '75vw', '575px': '90vw' }" [closable]="true" [dismissableMask]="true" [closeOnEscape]="true">
                            <ng-template pTemplate="header">
                                <div class="inline-flex align-items-center justify-content-center gap-2">
                                    <span class="font-bold white-space-nowrap">Chose project icon</span>
                                </div>
                            </ng-template>
                            <div class="wrapper-icons">
                                <div class="icon" *ngFor="let x of iconIndexes">
                                    <img [src]="getAllIconsForProject(x)" (click)="setProjectImage($event)">
                                </div>
                            </div>
                            <ng-template pTemplate="footer">
                                <p-button icon="pi pi-check" (click)="visible = false" label="Ok" pAutoFocus [autofocus]="true"></p-button>
                            </ng-template>
                        </p-dialog>
                    </div>
                </div>

                <form [formGroup]="form" (ngSubmit)="onSubmit()" class="form-group">
                    <span class="title">Name</span>
                    <input type="text" pInputText formControlName="name" class="projectName" placeholder="Project name" [(ngModel)]="projectName2"/>

                    <span class="title">Category</span>
                    <p-dropdown [options]="projectTypes" formControlName="category" optionLabel="name" placeholder="Select a Category" class="dropdownCateg" [showClear]="true" [(ngModel)]="projectType2"></p-dropdown>

                    <span class="title">Description</span>
                    <!-- <textarea rows="2" pInputTextarea></textarea> -->
                    <quill-editor class="content-editor"
                        [(ngModel)]="projectDescription2"
                        formControlName="description"
                        [placeholder]="'Enter description'"
                        >
                    </quill-editor>

                    <div class="btns">
                        <button type="submit" pButton pRipple label="Submit" class="p-button-primary" [disabled]="!projectName2"></button>
                    </div>
                </form>
            </div>
            <div id="right-side" class="container">
                <div class="wrapper">
                    <div class="info">
                        <span class="title">Transfer owenership</span>
                        <p>Transfer this project to another user.</p>
                    </div>
                    <div class="btn-wrap">
                        <button pButton pRipple label="Transfer" class="button-setting"></button>
                    </div>
                </div>

                <div class="wrapper">
                    <div class="info">
                        <span class="title">Deactivate project</span>
                        <p>Deactivate your project.</p>
                    </div>
                    <div class="btn-wrap">
                        <button pButton pDanger (click)="openPopUp($event)" label="Deactivate" class="button-setting del p-button-danger"></button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>